
load("@rules_foreign_cc//foreign_cc:defs.bzl", "meson")

filegroup(
    name = "pulseaudio_srcs",
    srcs = glob(
        ["**"],
        exclude = ["src/modules/alsa/mixer/samples/USB Device 0x46d:0x9a4--USB Mixer"]
    ),
)

meson(
    name = "libpulse",
    options = {
        "doxygen": "false",
        "man": "false",
    },
    copts = [
        "-fPIC",
    ],
    lib_source = ":pulseaudio_srcs",
    out_shared_libs = [
        "x86_64-linux-gnu/libpulse-simple.so",
        "x86_64-linux-gnu/libpulse-simple.so.0",
        "x86_64-linux-gnu/libpulse-simple.so.0.1.1",
        "x86_64-linux-gnu/libpulse.so",
        "x86_64-linux-gnu/libpulse.so.0",
        "x86_64-linux-gnu/libpulse.so.0.24.3",
        "x86_64-linux-gnu/pulseaudio/libpulsedsp.so",
        "x86_64-linux-gnu/pulseaudio/libpulsecommon-17.0.so",
        "x86_64-linux-gnu/pulseaudio/libpulsecore-17.0.so",
        "x86_64-linux-gnu/pulseaudio/modules/libcli.so",
        "x86_64-linux-gnu/pulseaudio/modules/liboss-util.so",
        "x86_64-linux-gnu/pulseaudio/modules/libprotocol-cli.so",
        "x86_64-linux-gnu/pulseaudio/modules/libprotocol-http.so",
        "x86_64-linux-gnu/pulseaudio/modules/libprotocol-native.so",
        "x86_64-linux-gnu/pulseaudio/modules/libprotocol-simple.so",
        "x86_64-linux-gnu/pulseaudio/modules/librtp.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-allow-passthrough.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-always-sink.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-always-source.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-augment-properties.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-card-restore.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-cli-protocol-tcp.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-cli-protocol-unix.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-cli.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-combine-sink.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-combine.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-default-device-restore.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-detect.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-device-manager.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-device-restore.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-echo-cancel.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-filter-apply.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-filter-heuristics.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-http-protocol-tcp.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-http-protocol-unix.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-intended-roles.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-ladspa-sink.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-loopback.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-match.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-mmkbd-evdev.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-native-protocol-fd.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-native-protocol-tcp.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-native-protocol-unix.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-null-sink.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-null-source.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-oss.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-pipe-sink.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-pipe-source.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-position-event-sounds.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-remap-sink.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-remap-source.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-rescue-streams.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-role-cork.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-role-ducking.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-rtp-recv.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-rtp-send.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-simple-protocol-tcp.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-simple-protocol-unix.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-sine-source.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-sine.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-stream-restore.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-suspend-on-idle.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-switch-on-connect.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-switch-on-port-available.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-tunnel-sink-new.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-tunnel-sink.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-tunnel-source-new.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-tunnel-source.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-virtual-sink.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-virtual-source.so",
        "x86_64-linux-gnu/pulseaudio/modules/module-volume-restore.so",
    ],
    visibility = ["//visibility:public"],
    deps = [
        "@libsndfile",
        "@tdb",
        "@check",
    ],
)
